---
schema_version: 0
flavor: go
region: oregon
shell: zsh
packages:
  - unp # install unzip/untar/unarchive wrapper
  - lcov
  - autojump
  - uber-ubuild-cli
  - uber-aifx
  - uber-hostcollector
  - kubectl
  - google-cloud-cli-gke-gcloud-auth-plugin
  - atop
  - sqlite3
  - jq # for Claude statusline JSON parsing
  - curl # for Claude Code installation
  - nodejs # for MCP agents
  - npm # for MCP agent dependencies

repositories:
  - dest: /home/user/.oh-my-zsh
    repo: https://github.com/ohmyzsh/ohmyzsh.git
  - dest: /home/user/bean-worksetup
    repo: https://github.com/jeffbean/worksetup.git
    update: true

tasks:
  # Run initial Claude setup
  - name: claude initial setup
    command: /home/user/bean-worksetup/devpod/flavors/claude/on-create.sh
    when: "on-create"
  
  # Run Claude updates
  - name: claude update setup  
    command: /home/user/bean-worksetup/devpod/flavors/claude/on-update.sh
    when: "on-restart"

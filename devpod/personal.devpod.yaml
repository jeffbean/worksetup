---
schema_version: 0
flavor: go
region: oregon
shell: zsh
packages:
  - unp # install unzip/untar/unarchive wrapper
  - lcov
  - autojump
  - uber-ubuild-cli
  - uber-aifx
  - uber-hostcollector
  - kubectl
  - google-cloud-cli-gke-gcloud-auth-plugin
  - atop
 
repositories:
  - dest: /home/user/.oh-my-zsh
    repo: https://github.com/ohmyzsh/ohmyzsh.git
  - dest: /home/user/bean-worksetup
    repo: https://github.com/jeffbean/worksetup.git
    update: true

tasks:
  # Run base devpod setup
  - name: devpod initial setup
    command: /home/user/bean-worksetup/devpod/flavors/base/on-create.sh
    when: "on-create"
  
  # Run devpod updates
  - name: devpod update setup  
    command: /home/user/bean-worksetup/devpod/flavors/base/on-update.sh
    when: "on-restart"
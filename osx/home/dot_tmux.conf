# Change prefix key to Ctrl+a
unbind C-b
set -g prefix C-a

set-option -g default-command "reattach-to-user-namespace -l zsh"

# Automatically set window title
set-window-option -g automatic-rename on
set-option -g set-titles on

# Enable pane titles and display them
set -g pane-border-status top
set -g pane-border-format "#{pane_title}"

# 0 is too far from ` ;)
set -g base-index 1

# Last active window
unbind l
bind C-a last-window

# vi like copy paste
set-window-option -g mode-keys vi

unbind p
bind p paste-buffer
#bind-key -t vi-copy 'v' begin-selection
#bind-key -t vi-copy 'y' copy-selection

set -g default-terminal "screen-256color"
# History
set -g history-limit 1000000

# Highlighting the active window in status bar
setw -g window-status-current-bg red

# Clock
setw -g clock-mode-style 24

# Custom DevPod split commands
# Ctrl+a d      - Visual devpod popup + project prompt
# Ctrl+a D      - Quick connect to main devpod (bean infra)  
# Ctrl+a Ctrl+d - Simple text prompt (fallback)

bind d display-popup -w 40 -h 15 -E ~/worksetup/osx/devpod/devpod-selector.sh
bind D run-shell '~/worksetup/osx/devpod/devpod-split.sh bean infra'
bind C-d command-prompt -p "DevPod Project (devpod-name project-name):" "run-shell '~/worksetup/osx/devpod/devpod-split.sh \"%1\"'"

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

set -g @plugin 'dracula/tmux'
set -g @dracula-show-flags true
set -g @dracula-show-empty-plugins false

set -g @dracula-show-left-icon "#h | #S"
set -g @dracula-plugins "compact-alt network ssh-session"

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
